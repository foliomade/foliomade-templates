---
export const prerender = false;
import Hero from "@components/Hero.astro";
import Layout from "@layouts/Layout.astro";
import Experience from "@components/Experience.astro";
import Projects from "@components/Projects.astro";
import About from "@components/About.astro";
import { fetchSiteConfig } from "../../../_shared/config";

import "../styles/global.css";

const portfolioId = Astro.url.searchParams.get('portfolioId');
const siteConfig = await fetchSiteConfig(portfolioId);
const notFound = !portfolioId || !siteConfig;
---
{notFound ? (
  <main style="min-height: 100vh; display:grid; place-items:center; background:#0b0f1a; color:#e5e7eb;">
    <section style="text-align:center; max-width: 720px; padding: 2rem;">
      <h1 style="font-size: clamp(2.25rem, 6vw, 4rem); line-height:1.05; margin:0 0 .75rem; font-weight:800;">Portfolio Not Found</h1>
      <p style="color:#9ca3af; font-size: clamp(1rem, 1.2vw, 1.15rem); margin: 0 0 1.5rem;">The requested portfolio is private or does not exist.</p>
      <a href="/" style="display:inline-block; padding:.7rem 1rem; border-radius:999px; border:1px solid rgba(148,163,184,.35); color:#e5e7eb; text-decoration:none; background-color: rgba(255,255,255,.06);">‚Üê Back to Home</a>
    </section>
  </main>
) : (
  <Layout siteConfig={siteConfig}>
    <Hero siteConfig={siteConfig} />
    <Experience siteConfig={siteConfig} />
    <Projects siteConfig={siteConfig} />
    <About siteConfig={siteConfig} />
    {siteConfig?.scripts && siteConfig.scripts.length > 0 && (
      <>
        {siteConfig.scripts.map((src) => <script src={src} defer />)}
      </>
    )}
  </Layout>
)}
