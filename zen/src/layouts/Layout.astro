---
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import { DEFAULT_ACCENT } from "../../../_shared/config";

const { siteConfig } = Astro.props as { siteConfig: import('../../../_shared/config').PortfolioSiteConfig };
---

<!doctype html>
<html lang="en" class="scroll-pt-16 scroll-smooth" style={`--accent: ${siteConfig?.accentColor || DEFAULT_ACCENT}` }>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={siteConfig?.description} />
    <meta name="author" content={siteConfig?.name} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <!-- Theming for browsers using the portfolio accent color -->
    <meta name="theme-color" content={siteConfig?.accentColor || DEFAULT_ACCENT} />
    <meta name="msapplication-navbutton-color" content={siteConfig?.accentColor || DEFAULT_ACCENT} />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>{siteConfig?.name} - {siteConfig?.title}</title>

    <!-- Initialize theme early to avoid flash -->
    <script is:inline>
      (function () {
        try {
          const stored = localStorage.getItem('theme');
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          const theme = stored || (prefersDark ? 'dark' : 'light');
          document.documentElement.dataset.theme = theme;
        } catch (e) {
          document.documentElement.dataset.theme = 'dark';
        }
      })();
    </script>

    <style is:global>
      :root {
        /* Dark (default) */
        --bg: #000000;
        --bg-elevated: #000000;
        --text: #ffffff;
        --text-muted: #9ca3af; /* neutral-400/500 */
        --text-90: rgba(255, 255, 255, 0.9);
        --text-80: rgba(255, 255, 255, 0.8);
        --text-70: rgba(255, 255, 255, 0.7);
        --border: rgba(255, 255, 255, 0.2);
        --card: #121212;
        --chip-bg: rgba(255, 255, 255, 0.05);
        --chip-border: rgba(255, 255, 255, 0.1);
        --chip-text: rgba(255, 255, 255, 0.85);
      }

      [data-theme='light'] {
        --bg: #ffffff;
        --bg-elevated: #ffffff;
        --text: #0a0a0a;
        --text-muted: #4b5563; /* neutral-600 */
        --text-90: rgba(0, 0, 0, 0.9);
        --text-80: rgba(0, 0, 0, 0.8);
        --text-70: rgba(0, 0, 0, 0.7);
        --border: rgba(0, 0, 0, 0.12);
        --card: #f8fafc;
        --chip-bg: rgba(0, 0, 0, 0.04);
        --chip-border: rgba(0, 0, 0, 0.1);
        --chip-text: rgba(0, 0, 0, 0.85);
      }

      /* Theme toggle icons visibility */
      .theme-icon { display: inline-block; }
      [data-theme='dark'] .icon-moon { display: none; }
      [data-theme='light'] .icon-sun { display: none; }
    </style>
  </head>
  <body class="bg-[var(--bg)] font-sans">
    <Header siteConfig={siteConfig} />
    <main class="mx-auto max-w-3xl px-5">
      <slot />
    </main>
    <Footer siteConfig={siteConfig} />
  </body>
</html>
